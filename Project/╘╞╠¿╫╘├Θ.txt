/*自动打弹用的一些标志位*/
bool Mobility_Prediction_Yaw = FALSE;//预测是否开启标志位——> is_prediction_open
bool Mobi_Pre_Yaw_Fire = FALSE;      //默认预测没到位，禁止开枪  is_prediction_can_Fire

uint16_t mobpre_yaw_left_delay = 0; //向左预测延时判断可开火消抖prediction_yaw_left_delay
uint16_t mobpre_yaw_right_delay = 0;//向右预测延时判断可开火消抖prediction_yaw_right_delay
uint16_t mobpre_yaw_stop_delay = 0; //预测关闭延时判断可开火消抖prediction_yaw_stop_delay


//自瞄突然开启,卡尔曼滤波开启延时
uint16_t Auto_KF_Delay = 0;    ——> Auto_Begin_Delay

float debug_y_sk;// = 38;//35;//30;//移动预测系数,越大预测越多 yaw_prediction_coefficient
float debug_y_sb_sk;//哨兵预测系数                                          yaw_prediction_coefficient_SB
float debug_y_sb_brig_sk;//桥头哨兵                                      yaw_prediction_coefficient_SB_OnBridge
float debug_p_sk;//移动预测系数,越大预测越多                           pitch_prediction_coefficient
float debug_auto_err_y;// = 10;//15;//10;//15;//yaw角度过大关闭预测           is_yaw_auto_err_high
float debug_auto_err_p;//pitch角度过大关闭预测                                is_pitch_auto_err_high
float debug_kf_delay;// = 150;//100;//200;//120;//150;//预测延时开启             prediction_open_delay
float debug_kf_speed_yl;//yaw速度过低关闭预测                        is_yaw_prediction_speed_low
float debug_kf_speed_yl_sb;//抬头打哨兵时减小最低可开预测量                  is_yaw_prediction_SB_speed_low
float debug_kf_speed_yh;//yaw速度过高关闭预测                   is_yaw_prediction_speed_high
float debug_kf_speed_pl;//pitch速度过低关闭预测                               is_pitch_prediction_speed_low
float debug_kf_y_angcon;// = 130;//125;//115;//135;//yaw预测量限幅       yaw_prediction_constrain
float debug_kf_p_angcon;//pitch预测量限幅                                pitch_prediction_constrain



float debug_y_dk = 450;//yaw距离预测比例，越大预测越少  
uint32_t Vision_Time[2];// NOW/LAST

int vision_time_js;
float error_yaw_k   = 1;//7.5;//5.6;//2.2;//误差放大
float error_pitch_k = 10;//5;//3;//2.1;//误差放大
float debug_kf_y_angle;//yaw预测暂存   yaw_prediction_AngleValue
float debug_kf_p_angle;//pitch预测暂存  pitch_prediction_AngleValue

//根据距离调节预测比例和限幅
float yaw_speed_k = 0; yaw_prediction_speed_k
float kf_yaw_angcon = 0; yaw_prection_constrain

float pitch_speed_k = 0;  pitch_prediction_speed_k
float kf_pitch_angcon = 0;  pitch_prection_constrain

float debug_kf_angle_temp;//预测角度斜坡暂存量      prediction_angle_temp
float debug_kf_angle_ramp = 20;//预测角度斜坡变化量 prediction_angle_ramp
float debug_kf_dist;
float debug_dist_bc = 0;
float gim_auto_ramp_y = 5;//10;//刚开启自瞄时缓慢移过去，防止视觉拖影掉帧
float gim_auto_ramp_p = 5;//刚开启自瞄时缓慢移过去，防止视觉拖影掉帧
int js_yaw = 0;
int js_pitch = 0;

float kf_speed_yl = 0;//    prediction_speed_yaw

static float yaw_angle_raw, pitch_angle_raw;//卡尔曼滤波角度测量值   yaw_prediction_measure
static float yaw_angle_ref;//记录目标角度  yaw_prediction_target
static float pitch_angle_ref;//记录目标角度

